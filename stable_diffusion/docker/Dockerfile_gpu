# Use NVIDIA CUDA base image
FROM nvidia/cuda:11.4.0-base

# Set working directory
WORKDIR /app

# Install any additional dependencies required for data processing
RUN apt-get update && apt-get install -y <additional_dependencies>

# Copy the requirements.txt file into the container
COPY requirements.txt .

# Install Python dependencies from requirements.txt
RUN pip install -r requirements.txt

# Install CUDA toolkit and cuDNN library for GPU support
RUN apt-get update && apt-get install -y cuda-compiler-11-4 libcudnn8=8.5.0.39-1+cuda11.4 libcudnn8-dev=8.5.0.39-1+cuda11.4

# Copy the script.py file into the container
COPY script.py .

# Set environment variables for input and output directories
ENV INPUT_DIR /host/tmp/input
ENV OUTPUT_DIR /host/tmp/output

# Run the script.py file with GPU support
CMD ["python", "script_gpu.py"]
